SQL注入：
===

## 原理：
发生在应用程序与数据库层的安全漏洞。<br>

* 用户访问网页实际流程：
	* 输入url,经 DNS 解析为 IP，连接到目标服务器
	* 服务器从本地储存的 Web 程序中加载页面并解析
	* 页面连接位于数据访问层的 DBMS, 并执行 SQL 	--sql注入的发生环节
	* DBMS 执行 sql 后将结果返回给 Web Server
	* 业务逻辑层的 Web Server 将页面封装成 HTML 格式，并响应给浏览器
	* 浏览器解析 HTML 页面并展示给用户

## 危害：
* 猜解后台数据库，盗取网站敏感信息
* 绕过验证，登录网站后台
* 借助数据库的存储过程进行提权等操作


## 1、初阶：

### 从协议角度分类：
#### GET注入：
通过在url中的自定义明文参数值来拼接sql，以获取所需信息。<br>
#### POST注入：
通过 Burp Suite 抓包的方式，抓取请求数据包，修改其中sql提取的属性的值，达到拼接sql的目的。<br>

### 判断SQL注入点：
#### 难点：
* 如何发现Web应用存在sql注入漏洞
* 如何构建能够被成功执行的第一条语句

#### 关键点：
* 判断该访问目标URL是否存在sql注入？
	* 单引号判断法： <br>
		http://...?id=1'	若页面返回错误，则存在sql注入。<br>
		原因： 无论字符串还是整型，都会因为单引号个数不匹配而报错。<br>
	* 回归测试：<br>
		核心：推测后端sql语句的形态，尝试闭合sql语句。<br>
* 如果存在sql注入，属于哪种sql注入？
	* 数字型：<br>
		通常构造 and 1=1 或者 and 1=2 来判断<br>
	* 字符型：<br>
		通常构造 ' and '1'='1 或者 ' and '1' = '2 来判断<br>
``TIPS: 只要是带有参数的 动态网页 且此网页访问了数据库，那么就有可能存在sql注入。``

### 防御方式：
* 减少错误信息反馈
* 对输入的特殊符号进行转义（黑名单）<br>
	\x00 \n \r \ ' " \x1a  --若经自定义转椅函数处理成功，则使用转义后字符；若失败，则返回false<br>
* 对输入特殊词组进行过滤（黑名单）<br>
	常见的关键字： and or select union 空格... 进行过滤<br>


